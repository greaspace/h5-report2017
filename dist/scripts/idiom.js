"use strict";!function(n){n.fn._show=n.fn.show,n.fn.show=function(n,e){return this._show(n,e).trigger("ui.shown")},n.fn._hide=n.fn.hide,n.fn.hide=function(n,e){return this._hide(n,e).trigger("ui.hidden")}}(jQuery),$(function(){function n(){var n=$(this);n.is(".selected")?r.trigger("answer.cancel",n.text()):(n.addClass("selected bounce"),r.trigger("answer.answer",n.text()),f.push(n))}function e(n,e){$("#redirect").show(function(){$(".ui-redirect-gate").one(d,function(){$(this).removeClass("redirect-animation-close"),n&&n(),$(this).one(d,function(){e&&e(),$("#redirect").hide(),$(this).removeClass("redirect-animation-open")}).addClass("redirect-animation-open")}).addClass("redirect-animation-close")})}function i(n){var e=["slide","bounce","zoom"][Math.floor(3*Math.random())],i=["Up","Left","Down","Right"][Math.floor(4*Math.random())];return n=n||"In",e+n+i}var a,t,o,s,d="webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend";a=$("#loadingPage"),a.show(function(){var n,e=0,i=setInterval(function(){e+=10,e<=100?n=Math.floor(Math.random()*e)+"%":(n="100%",clearInterval(i),a.trigger("load-finished")),$(".ui-loading-percent",a).text(n)},100)}).addClass(i()),t=$("#homePage"),a.one("load-finished",function(){a.one(d,function(){a.hide()}).addClass(i("Out")),t.show(function(){t.addClass(i())})}),$("#play",t).on("click",function(){e(function(){t.hide(),o.show()})}),o=$("#gamePage"),o.find("dd").addClass("animated");var r=$(".idiom-game-answer"),c="",f=[],l=r.find("dd"),u=$(".idiom-game-words dd",o);o.on("ui.hidden",function(){l.empty(),u.removeClass("bounce selected").off("click",n),r.removeClass("success")}).on("ui.shown",function(){c="",f=[],u.on("click",n)}),r.on("answer.answer",function(n,i){function a(n,e){$(l.get(n)).empty().append($('<span class="animated fadeIn">').text(e))}var t=$(this);if(a(c.length,i),c+=i,4==c.length){var s=t.data("answer");if(c==s)t.addClass("success");else{t.addClass("fail");var d=setTimeout(function(){var n=s.split("");t.removeClass("fail"),$.each(n,a),t.addClass("success"),clearTimeout(d)},200)}e(function(){o.hide(),$("#answerPage").show()},function(){c="",f=[]})}}),r.on("answer.cancel",function(n,e){for(var i=($(this),c.split(e)),a=c.indexOf(e),t=c.indexOf(e);t<c.length;t++)f[t].removeClass("selected bounce"),$("span",l.get(t)).one("animationend",function(){$(this).remove()}).addClass("fadeOut");c=i[0],f=f.slice(0,a)}),s=$("#answerPage"),$(".ui-answer-item").each(function(){$(this).addClass(i())}),$(".btn-next").on("click",function(){var n=$(this);e(function(){n.closest(".ui-page").hide(),o.show()})})});